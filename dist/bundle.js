/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={600:function(e,t,r){var a,o,n,i,s,l,c,u,d,h=this&&this.__classPrivateFieldSet||function(e,t,r,a,o){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?o.call(e,r):o?o.value=r:t.set(e,r),r},p=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const f=r(70),m=r(848),g=r(98),y=r(916),b=r(92),v=r(585);class w{constructor(e){var t,r,p,m,k,P;a.set(this,void 0),o.set(this,void 0),n.set(this,void 0),i.set(this,void 0),s.set(this,void 0),l.set(this,void 0),c.set(this,void 0),u.set(this,void 0),d.set(this,void 0),this.blocks={retrieve:e=>this.request({path:y.getBlock.path(e),method:y.getBlock.method,query:(0,g.pick)(e,y.getBlock.queryParams),body:(0,g.pick)(e,y.getBlock.bodyParams),auth:null==e?void 0:e.auth}),update:e=>this.request({path:y.updateBlock.path(e),method:y.updateBlock.method,query:(0,g.pick)(e,y.updateBlock.queryParams),body:(0,g.pick)(e,y.updateBlock.bodyParams),auth:null==e?void 0:e.auth}),delete:e=>this.request({path:y.deleteBlock.path(e),method:y.deleteBlock.method,query:(0,g.pick)(e,y.deleteBlock.queryParams),body:(0,g.pick)(e,y.deleteBlock.bodyParams),auth:null==e?void 0:e.auth}),children:{append:e=>this.request({path:y.appendBlockChildren.path(e),method:y.appendBlockChildren.method,query:(0,g.pick)(e,y.appendBlockChildren.queryParams),body:(0,g.pick)(e,y.appendBlockChildren.bodyParams),auth:null==e?void 0:e.auth}),list:e=>this.request({path:y.listBlockChildren.path(e),method:y.listBlockChildren.method,query:(0,g.pick)(e,y.listBlockChildren.queryParams),body:(0,g.pick)(e,y.listBlockChildren.bodyParams),auth:null==e?void 0:e.auth})}},this.databases={list:e=>this.request({path:y.listDatabases.path(),method:y.listDatabases.method,query:(0,g.pick)(e,y.listDatabases.queryParams),body:(0,g.pick)(e,y.listDatabases.bodyParams),auth:null==e?void 0:e.auth}),retrieve:e=>this.request({path:y.getDatabase.path(e),method:y.getDatabase.method,query:(0,g.pick)(e,y.getDatabase.queryParams),body:(0,g.pick)(e,y.getDatabase.bodyParams),auth:null==e?void 0:e.auth}),query:e=>this.request({path:y.queryDatabase.path(e),method:y.queryDatabase.method,query:(0,g.pick)(e,y.queryDatabase.queryParams),body:(0,g.pick)(e,y.queryDatabase.bodyParams),auth:null==e?void 0:e.auth}),create:e=>this.request({path:y.createDatabase.path(),method:y.createDatabase.method,query:(0,g.pick)(e,y.createDatabase.queryParams),body:(0,g.pick)(e,y.createDatabase.bodyParams),auth:null==e?void 0:e.auth}),update:e=>this.request({path:y.updateDatabase.path(e),method:y.updateDatabase.method,query:(0,g.pick)(e,y.updateDatabase.queryParams),body:(0,g.pick)(e,y.updateDatabase.bodyParams),auth:null==e?void 0:e.auth})},this.pages={create:e=>this.request({path:y.createPage.path(),method:y.createPage.method,query:(0,g.pick)(e,y.createPage.queryParams),body:(0,g.pick)(e,y.createPage.bodyParams),auth:null==e?void 0:e.auth}),retrieve:e=>this.request({path:y.getPage.path(e),method:y.getPage.method,query:(0,g.pick)(e,y.getPage.queryParams),body:(0,g.pick)(e,y.getPage.bodyParams),auth:null==e?void 0:e.auth}),update:e=>this.request({path:y.updatePage.path(e),method:y.updatePage.method,query:(0,g.pick)(e,y.updatePage.queryParams),body:(0,g.pick)(e,y.updatePage.bodyParams),auth:null==e?void 0:e.auth}),properties:{retrieve:e=>this.request({path:y.getPageProperty.path(e),method:y.getPageProperty.method,query:(0,g.pick)(e,y.getPageProperty.queryParams),body:(0,g.pick)(e,y.getPageProperty.bodyParams),auth:null==e?void 0:e.auth})}},this.users={retrieve:e=>this.request({path:y.getUser.path(e),method:y.getUser.method,query:(0,g.pick)(e,y.getUser.queryParams),body:(0,g.pick)(e,y.getUser.bodyParams),auth:null==e?void 0:e.auth}),list:e=>this.request({path:y.listUsers.path(),method:y.listUsers.method,query:(0,g.pick)(e,y.listUsers.queryParams),body:(0,g.pick)(e,y.listUsers.bodyParams),auth:null==e?void 0:e.auth}),me:e=>this.request({path:y.getSelf.path(),method:y.getSelf.method,query:(0,g.pick)(e,y.getSelf.queryParams),body:(0,g.pick)(e,y.getSelf.bodyParams),auth:null==e?void 0:e.auth})},this.comments={create:e=>this.request({path:y.createComment.path(),method:y.createComment.method,query:(0,g.pick)(e,y.createComment.queryParams),body:(0,g.pick)(e,y.createComment.bodyParams),auth:null==e?void 0:e.auth}),list:e=>this.request({path:y.listComments.path(),method:y.listComments.method,query:(0,g.pick)(e,y.listComments.queryParams),body:(0,g.pick)(e,y.listComments.bodyParams),auth:null==e?void 0:e.auth})},this.search=e=>this.request({path:y.search.path(),method:y.search.method,query:(0,g.pick)(e,y.search.queryParams),body:(0,g.pick)(e,y.search.bodyParams),auth:null==e?void 0:e.auth}),this.oauth={token:e=>this.request({path:y.oauthToken.path(),method:y.oauthToken.method,query:(0,g.pick)(e,y.oauthToken.queryParams),body:(0,g.pick)(e,y.oauthToken.bodyParams),auth:{client_id:e.client_id,client_secret:e.client_secret}})},h(this,a,null==e?void 0:e.auth,"f"),h(this,o,null!==(t=null==e?void 0:e.logLevel)&&void 0!==t?t:f.LogLevel.WARN,"f"),h(this,n,null!==(r=null==e?void 0:e.logger)&&void 0!==r?r:(0,f.makeConsoleLogger)(v.name),"f"),h(this,i,(null!==(p=null==e?void 0:e.baseUrl)&&void 0!==p?p:"https://api.notion.com")+"/v1/","f"),h(this,s,null!==(m=null==e?void 0:e.timeoutMs)&&void 0!==m?m:6e4,"f"),h(this,l,null!==(k=null==e?void 0:e.notionVersion)&&void 0!==k?k:w.defaultNotionVersion,"f"),h(this,c,null!==(P=null==e?void 0:e.fetch)&&void 0!==P?P:b.default,"f"),h(this,u,null==e?void 0:e.agent,"f"),h(this,d,`notionhq-client/${v.version}`,"f")}async request({path:e,method:t,query:r,body:a,auth:o}){this.log(f.LogLevel.INFO,"request start",{method:t,path:e});const n=a&&0!==Object.entries(a).length?JSON.stringify(a):void 0,h=new URL(`${p(this,i,"f")}${e}`);if(r)for(const[e,t]of Object.entries(r))void 0!==t&&(Array.isArray(t)?t.forEach((t=>h.searchParams.append(e,decodeURIComponent(t)))):h.searchParams.append(e,String(t)));let g;if("object"==typeof o){const e=`${o.client_id}:${o.client_secret}`;g={authorization:`Basic ${Buffer.from(e).toString("base64")}`}}else g=this.authAsHeaders(o);const y={...g,"Notion-Version":p(this,l,"f"),"user-agent":p(this,d,"f")};void 0!==n&&(y["content-type"]="application/json");try{const r=await m.RequestTimeoutError.rejectAfterTimeout(p(this,c,"f").call(this,h.toString(),{method:t.toUpperCase(),headers:y,body:n,agent:p(this,u,"f")}),p(this,s,"f")),a=await r.text();if(!r.ok)throw(0,m.buildRequestError)(r,a);const o=JSON.parse(a);return this.log(f.LogLevel.INFO,"request success",{method:t,path:e}),o}catch(e){if(!(0,m.isNotionClientError)(e))throw e;throw this.log(f.LogLevel.WARN,"request fail",{code:e.code,message:e.message}),(0,m.isHTTPResponseError)(e)&&this.log(f.LogLevel.DEBUG,"failed response body",{body:e.body}),e}}log(e,t,r){(0,f.logLevelSeverity)(e)>=(0,f.logLevelSeverity)(p(this,o,"f"))&&p(this,n,"f").call(this,e,t,r)}authAsHeaders(e){const t={},r=null!=e?e:p(this,a,"f");return void 0!==r&&(t.authorization=`Bearer ${r}`),t}}t.default=w,a=new WeakMap,o=new WeakMap,n=new WeakMap,i=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,w.defaultNotionVersion="2022-06-28"},916:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthToken=t.listComments=t.createComment=t.search=t.createDatabase=t.listDatabases=t.queryDatabase=t.updateDatabase=t.getDatabase=t.appendBlockChildren=t.listBlockChildren=t.deleteBlock=t.updateBlock=t.getBlock=t.getPageProperty=t.updatePage=t.getPage=t.createPage=t.listUsers=t.getUser=t.getSelf=void 0,t.getSelf={method:"get",pathParams:[],queryParams:[],bodyParams:[],path:()=>"users/me"},t.getUser={method:"get",pathParams:["user_id"],queryParams:[],bodyParams:[],path:e=>`users/${e.user_id}`},t.listUsers={method:"get",pathParams:[],queryParams:["start_cursor","page_size"],bodyParams:[],path:()=>"users"},t.createPage={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","properties","icon","cover","content","children"],path:()=>"pages"},t.getPage={method:"get",pathParams:["page_id"],queryParams:["filter_properties"],bodyParams:[],path:e=>`pages/${e.page_id}`},t.updatePage={method:"patch",pathParams:["page_id"],queryParams:[],bodyParams:["properties","icon","cover","archived","in_trash"],path:e=>`pages/${e.page_id}`},t.getPageProperty={method:"get",pathParams:["page_id","property_id"],queryParams:["start_cursor","page_size"],bodyParams:[],path:e=>`pages/${e.page_id}/properties/${e.property_id}`},t.getBlock={method:"get",pathParams:["block_id"],queryParams:[],bodyParams:[],path:e=>`blocks/${e.block_id}`},t.updateBlock={method:"patch",pathParams:["block_id"],queryParams:[],bodyParams:["embed","type","archived","in_trash","bookmark","image","video","pdf","file","audio","code","equation","divider","breadcrumb","table_of_contents","link_to_page","table_row","heading_1","heading_2","heading_3","paragraph","bulleted_list_item","numbered_list_item","quote","to_do","toggle","template","callout","synced_block","table"],path:e=>`blocks/${e.block_id}`},t.deleteBlock={method:"delete",pathParams:["block_id"],queryParams:[],bodyParams:[],path:e=>`blocks/${e.block_id}`},t.listBlockChildren={method:"get",pathParams:["block_id"],queryParams:["start_cursor","page_size"],bodyParams:[],path:e=>`blocks/${e.block_id}/children`},t.appendBlockChildren={method:"patch",pathParams:["block_id"],queryParams:[],bodyParams:["children","after"],path:e=>`blocks/${e.block_id}/children`},t.getDatabase={method:"get",pathParams:["database_id"],queryParams:[],bodyParams:[],path:e=>`databases/${e.database_id}`},t.updateDatabase={method:"patch",pathParams:["database_id"],queryParams:[],bodyParams:["title","description","icon","cover","properties","is_inline","archived","in_trash"],path:e=>`databases/${e.database_id}`},t.queryDatabase={method:"post",pathParams:["database_id"],queryParams:["filter_properties"],bodyParams:["sorts","filter","start_cursor","page_size","archived","in_trash"],path:e=>`databases/${e.database_id}/query`},t.listDatabases={method:"get",pathParams:[],queryParams:["start_cursor","page_size"],bodyParams:[],path:()=>"databases"},t.createDatabase={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","properties","icon","cover","title","description","is_inline"],path:()=>"databases"},t.search={method:"post",pathParams:[],queryParams:[],bodyParams:["sort","query","start_cursor","page_size","filter"],path:()=>"search"},t.createComment={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","rich_text","discussion_id"],path:()=>"comments"},t.listComments={method:"get",pathParams:[],queryParams:["block_id","start_cursor","page_size"],bodyParams:[],path:()=>"comments"},t.oauthToken={method:"post",pathParams:[],queryParams:[],bodyParams:["grant_type","code","redirect_uri","external_account"],path:()=>"oauth/token"}},848:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildRequestError=t.APIResponseError=t.UnknownHTTPResponseError=t.isHTTPResponseError=t.RequestTimeoutError=t.isNotionClientError=t.ClientErrorCode=t.APIErrorCode=void 0;const a=r(98);var o,n;!function(e){e.Unauthorized="unauthorized",e.RestrictedResource="restricted_resource",e.ObjectNotFound="object_not_found",e.RateLimited="rate_limited",e.InvalidJSON="invalid_json",e.InvalidRequestURL="invalid_request_url",e.InvalidRequest="invalid_request",e.ValidationError="validation_error",e.ConflictError="conflict_error",e.InternalServerError="internal_server_error",e.ServiceUnavailable="service_unavailable"}(o=t.APIErrorCode||(t.APIErrorCode={})),function(e){e.RequestTimeout="notionhq_client_request_timeout",e.ResponseError="notionhq_client_response_error"}(n=t.ClientErrorCode||(t.ClientErrorCode={}));class i extends Error{}function s(e){return(0,a.isObject)(e)&&e instanceof i}function l(e,t){return s(e)&&e.code in t}t.isNotionClientError=s;class c extends i{constructor(e="Request to Notion API has timed out"){super(e),this.code=n.RequestTimeout,this.name="RequestTimeoutError"}static isRequestTimeoutError(e){return l(e,{[n.RequestTimeout]:!0})}static rejectAfterTimeout(e,t){return new Promise(((r,a)=>{const o=setTimeout((()=>{a(new c)}),t);e.then(r).catch(a).then((()=>clearTimeout(o)))}))}}t.RequestTimeoutError=c;class u extends i{constructor(e){super(e.message),this.name="HTTPResponseError";const{code:t,status:r,headers:a,rawBodyText:o}=e;this.code=t,this.status=r,this.headers=a,this.body=o}}const d={[n.ResponseError]:!0,[o.Unauthorized]:!0,[o.RestrictedResource]:!0,[o.ObjectNotFound]:!0,[o.RateLimited]:!0,[o.InvalidJSON]:!0,[o.InvalidRequestURL]:!0,[o.InvalidRequest]:!0,[o.ValidationError]:!0,[o.ConflictError]:!0,[o.InternalServerError]:!0,[o.ServiceUnavailable]:!0};t.isHTTPResponseError=function(e){return!!l(e,d)};class h extends u{constructor(e){var t;super({...e,code:n.ResponseError,message:null!==(t=e.message)&&void 0!==t?t:`Request to Notion API failed with status: ${e.status}`}),this.name="UnknownHTTPResponseError"}static isUnknownHTTPResponseError(e){return l(e,{[n.ResponseError]:!0})}}t.UnknownHTTPResponseError=h;const p={[o.Unauthorized]:!0,[o.RestrictedResource]:!0,[o.ObjectNotFound]:!0,[o.RateLimited]:!0,[o.InvalidJSON]:!0,[o.InvalidRequestURL]:!0,[o.InvalidRequest]:!0,[o.ValidationError]:!0,[o.ConflictError]:!0,[o.InternalServerError]:!0,[o.ServiceUnavailable]:!0};class f extends u{constructor(){super(...arguments),this.name="APIResponseError"}static isAPIResponseError(e){return l(e,p)}}t.APIResponseError=f,t.buildRequestError=function(e,t){const r=function(e){if("string"!=typeof e)return;let t;try{t=JSON.parse(e)}catch(e){return}var r;return(0,a.isObject)(t)&&"string"==typeof t.message&&("string"==typeof(r=t.code)&&r in p)?{...t,code:t.code,message:t.message}:void 0}(t);return void 0!==r?new f({code:r.code,message:r.message,headers:e.headers,status:e.status,rawBodyText:t}):new h({message:void 0,headers:e.headers,status:e.status,rawBodyText:t})}},390:(e,t)=>{async function*r(e,t){let r=t.start_cursor;do{const a=await e({...t,start_cursor:r});yield*a.results,r=a.next_cursor}while(r)}function a(e){return"page"===e.object&&"url"in e}function o(e){return"database"===e.object&&"title"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isMentionRichTextItemResponse=t.isEquationRichTextItemResponse=t.isTextRichTextItemResponse=t.isFullComment=t.isFullUser=t.isFullPageOrDatabase=t.isFullDatabase=t.isFullPage=t.isFullBlock=t.collectPaginatedAPI=t.iteratePaginatedAPI=void 0,t.iteratePaginatedAPI=r,t.collectPaginatedAPI=async function(e,t){const a=[];for await(const o of r(e,t))a.push(o);return a},t.isFullBlock=function(e){return"block"===e.object&&"type"in e},t.isFullPage=a,t.isFullDatabase=o,t.isFullPageOrDatabase=function(e){return"database"===e.object?o(e):a(e)},t.isFullUser=function(e){return"type"in e},t.isFullComment=function(e){return"created_by"in e},t.isTextRichTextItemResponse=function(e){return"text"===e.type},t.isEquationRichTextItemResponse=function(e){return"equation"===e.type},t.isMentionRichTextItemResponse=function(e){return"mention"===e.type}},7:(e,t,r)=>{t.Kj=void 0;var a=r(600);Object.defineProperty(t,"Kj",{enumerable:!0,get:function(){return a.default}});r(70),r(848),r(390)},70:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logLevelSeverity=t.makeConsoleLogger=t.LogLevel=void 0;const a=r(98);var o;!function(e){e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error"}(o=t.LogLevel||(t.LogLevel={})),t.makeConsoleLogger=function(e){return(t,r,a)=>{console[t](`${e} ${t}:`,r,a)}},t.logLevelSeverity=function(e){switch(e){case o.DEBUG:return 20;case o.INFO:return 40;case o.WARN:return 60;case o.ERROR:return 80;default:return(0,a.assertNever)(e)}}},98:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=t.pick=t.assertNever=void 0,t.assertNever=function(e){throw new Error(`Unexpected value should never occur: ${e}`)},t.pick=function(e,t){const r=t.map((t=>[t,null==e?void 0:e[t]]));return Object.fromEntries(r)},t.isObject=function(e){return"object"==typeof e&&null!==e}},717:(e,t,r)=>{var a=r(208);e.exports=function(e,t){for(var r,u,d,h,p,v,w,k,P,_,x,q,M=t||{},E=!1!==M.padding,T=!1!==M.delimiterStart,C=!1!==M.delimiterEnd,O=(M.align||[]).concat(),j=!1!==M.alignDelimiters,S=[],R=M.stringLength||y,I=-1,$=e.length,L=[],B=[],D=[],N=[],A=[],F=0;++I<$;){for(u=-1,D=[],N=[],(d=(r=e[I]).length)>F&&(F=d);++u<d;)v=null==(q=r[u])?"":String(q),!0===j&&(p=R(v),N[u]=p,(void 0===(h=A[u])||p>h)&&(A[u]=p)),D.push(v);L[I]=D,B[I]=N}if(u=-1,d=F,"object"==typeof O&&"length"in O)for(;++u<d;)S[u]=b(O[u]);else for(x=b(O);++u<d;)S[u]=x;for(u=-1,d=F,D=[],N=[];++u<d;)P="",_="",(x=S[u])===m?P=l:x===g?_=l:x===f&&(P=l,_=l),p=j?Math.max(1,A[u]-P.length-_.length):1,v=P+a(s,p)+_,!0===j&&((p=P.length+p+_.length)>A[u]&&(A[u]=p),N[u]=p),D[u]=v;for(L.splice(1,0,D),B.splice(1,0,N),I=-1,$=L.length,w=[];++I<$;){for(D=L[I],N=B[I],u=-1,d=F,k=[];++u<d;)v=D[u]||"",P="",_="",!0===j&&(p=A[u]-(N[u]||0),(x=S[u])===g?P=a(n,p):x===f?p%2==0?_=P=a(n,p/2):(P=a(n,p/2+.5),_=a(n,p/2-.5)):_=a(n,p)),!0===T&&0===u&&k.push(c),!0!==E||!1===j&&""===v||!0!==T&&0===u||k.push(n),!0===j&&k.push(P),k.push(v),!0===j&&k.push(_),!0===E&&k.push(n),!0!==C&&u===d-1||k.push(c);k=k.join(""),!1===C&&(k=k.replace(o,"")),w.push(k)}return w.join(i)};var o=/ +$/,n=" ",i="\n",s="-",l=":",c="|",u=0,d=67,h=76,p=82,f=99,m=108,g=114;function y(e){return e.length}function b(e){var t="string"==typeof e?e.charCodeAt(0):u;return t===h||t===m?m:t===p||t===g?g:t===d||t===f?f:u}},92:(e,t,r)=>{var a=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();e.exports=t=a.fetch,a.fetch&&(t.default=a.fetch.bind(a)),t.Headers=a.Headers,t.Request=a.Request,t.Response=a.Response},599:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,o)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(478),t)},478:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,o)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NotionToMarkdown=void 0;const i=n(r(376)),s=r(456);t.NotionToMarkdown=class{constructor(e){this.notionClient=e.notionClient,this.config={separateChildPage:!1,convertImagesToBase64:!1,parseChildPages:!0,...e.config},this.customTransformers={}}setCustomTransformer(e,t){return this.customTransformers[e]=t,this}toMarkdownString(e=[],t="parent",r=0){let a={};return e.forEach((e=>{if(e.parent&&"toggle"!==e.type&&"child_page"!==e.type&&("to_do"!==e.type&&"bulleted_list_item"!==e.type&&"numbered_list_item"!==e.type?(a[t]=a[t]||"",a[t]+=`\n${i.addTabSpace(e.parent,r)}\n\n`):(a[t]=a[t]||"",a[t]+=`${i.addTabSpace(e.parent,r)}\n`)),e.children&&e.children.length>0)if("synced_block"===e.type||"column_list"===e.type||"column"===e.type){let r=this.toMarkdownString(e.children,t);a[t]=a[t]||"",Object.keys(r).forEach((e=>{a[e]?a[e]+=r[e]:a[e]=r[e]}))}else if("child_page"===e.type){const r=e.parent;let o=this.toMarkdownString(e.children,r);this.config.separateChildPage?a={...a,...o}:(a[t]=a[t]||"",o[r]&&(a[t]+=`\n${r}\n${o[r]}`))}else if("toggle"===e.type){const r=this.toMarkdownString(e.children);a[t]=a[t]||"",a[t]+=i.toggle(e.parent,r.parent)}else{let o=this.toMarkdownString(e.children,t,r+1);a[t]=a[t]||"","parent"!==t&&o.parent?a[t]+=o.parent:o[t]&&(a[t]+=o[t])}})),a}async pageToMarkdown(e,t=null){if(!this.notionClient)throw new Error("notion client is not provided, for more details check out https://github.com/souvikinator/notion-to-md");const r=await(0,s.getBlockChildren)(this.notionClient,e,t);return await this.blocksToMarkdown(r)}async blocksToMarkdown(e,t=null,r=[]){var a,o;if(!this.notionClient)throw new Error("notion client is not provided, for more details check out https://github.com/souvikinator/notion-to-md");if(!e)return r;for(let n=0;n<e.length;n++){let i=e[n];if("child_page"===i.type&&!this.config.parseChildPages)continue;if("has_children"in i&&i.has_children){const e="synced_block"==i.type&&(null===(o=null===(a=i.synced_block)||void 0===a?void 0:a.synced_from)||void 0===o?void 0:o.block_id)?i.synced_block.synced_from.block_id:i.id;let n=await(0,s.getBlockChildren)(this.notionClient,e,t);if(r.push({type:i.type,blockId:i.id,parent:await this.blockToMarkdown(i),children:[]}),!(i.type in this.customTransformers)&&!this.customTransformers[i.type]){let e=r.length;await this.blocksToMarkdown(n,t,r[e-1].children)}continue}let l=await this.blockToMarkdown(i);r.push({type:i.type,blockId:i.id,parent:l,children:[]})}return r}async blockToMarkdown(e){if("object"!=typeof e||!("type"in e))return"";let t="";const{type:r}=e;if(r in this.customTransformers&&this.customTransformers[r]){const t=await this.customTransformers[r](e);if("string"==typeof t)return t}switch(r){case"image":{let t=e.image,r="image";const a=t.caption.map((e=>e.plain_text)).join(""),o=t.type;let n="";if("external"===o&&(n=t.external.url),"file"===o&&(n=t.file.url),a.trim().length>0)r=a;else if("file"===o||"external"===o){const e=n.match(/[^\/\\&\?]+\.\w{3,4}(?=([\?&].*$|$))/);r=e?e[0]:r}return await i.image(r,n,this.config.convertImagesToBase64)}case"divider":return i.divider();case"equation":return i.equation(e.equation.expression);case"video":case"file":case"pdf":{let t,a=r;"video"===r&&(t=e.video),"file"===r&&(t=e.file),"pdf"===r&&(t=e.pdf);const o=null==t?void 0:t.caption.map((e=>e.plain_text)).join("");if(t){const e=t.type;let n="";if("external"===e&&(n=t.external.url),"file"===e&&(n=t.file.url),o&&o.trim().length>0)a=o;else if(n){const e=n.match(/[^\/\\&\?]+\.\w{3,4}(?=([\?&].*$|$))/);a=e?e[0]:r}return i.link(a,n)}}break;case"bookmark":case"embed":case"link_preview":case"link_to_page":{let t,a=r;if("bookmark"===r&&(t=e.bookmark),"embed"===r&&(t=e.embed),"link_preview"===r&&(t=e.link_preview),"link_to_page"===r&&"page_id"===e.link_to_page.type&&(t={url:e.link_to_page.page_id}),t)return i.link(a,t.url)}break;case"child_page":{if(!this.config.parseChildPages)return"";let t=e.child_page.title;return this.config.separateChildPage?t:i.heading2(t)}case"child_database":return e.child_database.title||"child_database";case"table":{const{id:t,has_children:r}=e;let a=[];if(r){const e=await(0,s.getBlockChildren)(this.notionClient,t,100);let r=null==e?void 0:e.map((async e=>{const{type:t}=e;let r=e[t].cells.map((async e=>await this.blockToMarkdown({type:"paragraph",paragraph:{rich_text:e}})));const o=await Promise.all(r);a.push(o)}));await Promise.all(r||[])}return i.table(a)}default:(e[r].text||e[r].rich_text||[]).map((e=>{if("equation"===e.type)return void(t+=i.inlineEquation(e.equation.expression));const r=e.annotations;let a=e.plain_text;a=this.annotatePlainText(a,r),e.href&&(a=i.link(a,e.href)),t+=a}))}switch(r){case"code":t=i.codeBlock(t,e[r].language);break;case"heading_1":t=i.heading1(t);break;case"heading_2":t=i.heading2(t);break;case"heading_3":t=i.heading3(t);break;case"quote":t=i.quote(t);break;case"callout":{const{id:a,has_children:o}=e;let n="";if(!o)return i.callout(t,e[r].icon);const l=await(0,s.getBlockChildren)(this.notionClient,a,100),c=await this.blocksToMarkdown(l);n+=`${t}\n`,c.map((e=>{n+=`${e.parent}\n\n`})),t=i.callout(n.trim(),e[r].icon)}break;case"bulleted_list_item":t=i.bullet(t);break;case"numbered_list_item":t=i.bullet(t,e.numbered_list_item.number);break;case"to_do":t=i.todo(t,e.to_do.checked)}return t}annotatePlainText(e,t){if(e.match(/^\s*$/))return e;const r=e.match(/^(\s*)/),a=e.match(/(\s*)$/),o=r?r[0]:"",n=a?a[0]:"";return""!==(e=e.trim())&&(t.code&&(e=i.inlineCode(e)),t.bold&&(e=i.bold(e)),t.italic&&(e=i.italic(e)),t.strikethrough&&(e=i.strikethrough(e)),t.underline&&(e=i.underline(e))),o+e+n}}},376:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.table=t.toggle=t.divider=t.addTabSpace=t.image=t.todo=t.bullet=t.callout=t.quote=t.heading3=t.heading2=t.heading1=t.equation=t.codeBlock=t.link=t.underline=t.strikethrough=t.italic=t.bold=t.inlineEquation=t.inlineCode=void 0;const o=a(r(717)),n=a(r(92));t.inlineCode=e=>`\`${e}\``,t.inlineEquation=e=>`$${e}$`,t.bold=e=>`**${e}**`,t.italic=e=>`_${e}_`,t.strikethrough=e=>`~~${e}~~`,t.underline=e=>`<u>${e}</u>`,t.link=(e,t)=>`[${e}](${t})`,t.codeBlock=(e,t)=>("plain text"===t&&(t="text"),`\`\`\`${t}\n${e}\n\`\`\``),t.equation=e=>`$$\n${e}\n$$`,t.heading1=e=>`# ${e}`,t.heading2=e=>`## ${e}`,t.heading3=e=>`### ${e}`,t.quote=e=>`> ${e.replace(/\n/g,"  \n> ")}`,t.callout=(e,t)=>{let r;return"emoji"===(null==t?void 0:t.type)&&(r=t.emoji),`> ${r?r+" ":""}${e.replace(/\n/g,"  \n> ")}`},t.bullet=(e,t)=>{let r=e.trim();return t?`${t}. ${r}`:`- ${r}`},t.todo=(e,t)=>t?`- [x] ${e}`:`- [ ] ${e}`,t.image=async(e,t,r=!1)=>{if(!r||t.startsWith("data:"))return t.startsWith("data:")?`![${e}](data:image/png;base64,${t.split(",").pop()})`:`![${e}](${t})`;{const r=await(0,n.default)(t),a=await r.arrayBuffer();return`![${e}](data:image/png;base64,${Buffer.from(a).toString("base64")})`}},t.addTabSpace=(e,t=0)=>{for(let r=0;r<t;r++)if(e.includes("\n")){const t=e.split(/(?:^|\n)/).join("\n\t");e="\t"+t}else e="\t"+e;return e},t.divider=()=>"---",t.toggle=(e,t)=>e?`<details>\n<summary>${e}</summary>\n${t||""}\n</details>\n\n`:t||"",t.table=e=>(0,o.default)(e)},456:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.modifyNumberedListObject=t.getBlockChildren=void 0,t.getBlockChildren=async(e,r,a)=>{let o,n=[],i=0;do{const t=await e.blocks.children.list({start_cursor:o,block_id:r});n.push(...t.results),o=null==t?void 0:t.next_cursor,i+=1}while(null!=o&&(null==a||i<a));return(0,t.modifyNumberedListObject)(n),n},t.modifyNumberedListObject=e=>{let t=0;for(const r of e)"type"in r&&"numbered_list_item"===r.type?r.numbered_list_item.number=++t:t=0}},208:e=>{var t,r="";e.exports=function(e,a){if("string"!=typeof e)throw new TypeError("expected a string");if(1===a)return e;if(2===a)return e+e;var o=e.length*a;if(t!==e||void 0===t)t=e,r="";else if(r.length>=o)return r.substr(0,o);for(;o>r.length&&a>1;)1&a&&(r+=e),a>>=1,e+=e;return r=(r+=e).substr(0,o)}},585:e=>{e.exports=JSON.parse('{"name":"@notionhq/client","version":"2.2.15","description":"A simple and easy to use client for the Notion API","engines":{"node":">=12"},"homepage":"https://developers.notion.com/docs/getting-started","bugs":{"url":"https://github.com/makenotion/notion-sdk-js/issues"},"repository":{"type":"git","url":"https://github.com/makenotion/notion-sdk-js/"},"keywords":["notion","notionapi","rest","notion-api"],"main":"./build/src","types":"./build/src/index.d.ts","scripts":{"prepare":"npm run build","prepublishOnly":"npm run checkLoggedIn && npm run lint && npm run test","build":"tsc","prettier":"prettier --write .","lint":"prettier --check . && eslint . --ext .ts && cspell \'**/*\' ","test":"jest ./test","check-links":"git ls-files | grep md$ | xargs -n 1 markdown-link-check","prebuild":"npm run clean","clean":"rm -rf ./build","checkLoggedIn":"./scripts/verifyLoggedIn.sh"},"author":"","license":"MIT","files":["build/package.json","build/src/**"],"dependencies":{"@types/node-fetch":"^2.5.10","node-fetch":"^2.6.1"},"devDependencies":{"@types/jest":"^28.1.4","@typescript-eslint/eslint-plugin":"^5.39.0","@typescript-eslint/parser":"^5.39.0","cspell":"^5.4.1","eslint":"^7.24.0","jest":"^28.1.2","markdown-link-check":"^3.8.7","prettier":"^2.8.8","ts-jest":"^28.0.5","typescript":"^4.8.4"}}')}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,r),n.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var a=r(7),o=r(599),n={};!function e(t,r,a,o){var n=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),i="function"==typeof Path2D&&"function"==typeof DOMMatrix,s=function(){if(!t.OffscreenCanvas)return!1;var e=new OffscreenCanvas(1,1),r=e.getContext("2d");r.fillRect(0,0,1,1);var a=e.transferToImageBitmap();try{r.createPattern(a,"no-repeat")}catch(e){return!1}return!0}();function l(){}function c(e){var a=r.exports.Promise,o=void 0!==a?a:t.Promise;return"function"==typeof o?new o(e):(e(l,l),null)}var u,d,h,p,f,m,g,y,b,v,w,k=(u=s,d=new Map,{transform:function(e){if(u)return e;if(d.has(e))return d.get(e);var t=new OffscreenCanvas(e.width,e.height);return t.getContext("2d").drawImage(e,0,0),d.set(e,t),t},clear:function(){d.clear()}}),P=(f=Math.floor(1e3/60),m={},g=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(h=function(e){var t=Math.random();return m[t]=requestAnimationFrame((function r(a){g===a||g+f-1<a?(g=a,delete m[t],e()):m[t]=requestAnimationFrame(r)})),t},p=function(e){m[e]&&cancelAnimationFrame(m[e])}):(h=function(e){return setTimeout(e,f)},p=function(e){return clearTimeout(e)}),{frame:h,cancel:p}),_=(v={},function(){if(y)return y;if(!a&&n){var t=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{y=new Worker(URL.createObjectURL(new Blob([t])))}catch(e){return void 0!==typeof console&&"function"==typeof console.warn&&console.warn("ðŸŽŠ Could not load worker",e),null}!function(e){function t(t,r){e.postMessage({options:t||{},callback:r})}e.init=function(t){var r=t.transferControlToOffscreen();e.postMessage({canvas:r},[r])},e.fire=function(r,a,o){if(b)return t(r,null),b;var n=Math.random().toString(36).slice(2);return b=c((function(a){function i(t){t.data.callback===n&&(delete v[n],e.removeEventListener("message",i),b=null,k.clear(),o(),a())}e.addEventListener("message",i),t(r,n),v[n]=i.bind(null,{data:{callback:n}})}))},e.reset=function(){for(var t in e.postMessage({reset:!0}),v)v[t](),delete v[t]}}(y)}return y}),x={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function q(e,t,r){return function(e,t){return t?t(e):e}(e&&null!=e[t]?e[t]:x[t],r)}function M(e){return e<0?0:Math.floor(e)}function E(e){return parseInt(e,16)}function T(e){return e.map(C)}function C(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:E(t.substring(0,2)),g:E(t.substring(2,4)),b:E(t.substring(4,6))}}function O(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function j(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function S(e,r){var s,l=!e,u=!!q(r||{},"resize"),d=!1,h=q(r,"disableForReducedMotion",Boolean),p=n&&q(r||{},"useWorker")?_():null,f=l?O:j,m=!(!e||!p||!e.__confetti_initialized),g="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function y(t,r,n){for(var l,u,d,h,p=q(t,"particleCount",M),m=q(t,"angle",Number),g=q(t,"spread",Number),y=q(t,"startVelocity",Number),b=q(t,"decay",Number),v=q(t,"gravity",Number),w=q(t,"drift",Number),_=q(t,"colors",T),x=q(t,"ticks",Number),E=q(t,"shapes"),C=q(t,"scalar"),O=!!q(t,"flat"),j=function(e){var t=q(e,"origin",Object);return t.x=q(t,"x",Number),t.y=q(t,"y",Number),t}(t),S=p,R=[],I=e.width*j.x,$=e.height*j.y;S--;)R.push((void 0,void 0,u=(l={x:I,y:$,angle:m,spread:g,startVelocity:y,color:_[S%_.length],shape:E[(h=E.length,Math.floor(Math.random()*(h-0))+0)],ticks:x,decay:b,gravity:v,drift:w,scalar:C,flat:O}).angle*(Math.PI/180),d=l.spread*(Math.PI/180),{x:l.x,y:l.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*l.startVelocity+Math.random()*l.startVelocity,angle2D:-u+(.5*d-Math.random()*d),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:l.color,shape:l.shape,tick:0,totalTicks:l.ticks,decay:l.decay,drift:l.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*l.gravity,ovalScalar:.6,scalar:l.scalar,flat:l.flat}));return s?s.addFettis(R):(s=function(e,t,r,n,s){var l,u,d=t.slice(),h=e.getContext("2d"),p=c((function(t){function c(){l=u=null,h.clearRect(0,0,n.width,n.height),k.clear(),s(),t()}l=P.frame((function t(){!a||n.width===o.width&&n.height===o.height||(n.width=e.width=o.width,n.height=e.height=o.height),n.width||n.height||(r(e),n.width=e.width,n.height=e.height),h.clearRect(0,0,n.width,n.height),(d=d.filter((function(e){return function(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var r=t.tick++/t.totalTicks,a=t.x+t.random*t.tiltCos,o=t.y+t.random*t.tiltSin,n=t.wobbleX+t.random*t.tiltCos,s=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-r)+")",e.beginPath(),i&&"path"===t.shape.type&&"string"==typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill(function(e,t,r,a,o,n,i){var s=new Path2D(e),l=new Path2D;l.addPath(s,new DOMMatrix(t));var c=new Path2D;return c.addPath(l,new DOMMatrix([Math.cos(i)*o,Math.sin(i)*o,-Math.sin(i)*n,Math.cos(i)*n,r,a])),c}(t.shape.path,t.shape.matrix,t.x,t.y,.1*Math.abs(n-a),.1*Math.abs(s-o),Math.PI/10*t.wobble));else if("bitmap"===t.shape.type){var l=Math.PI/10*t.wobble,c=.1*Math.abs(n-a),u=.1*Math.abs(s-o),d=t.shape.bitmap.width*t.scalar,h=t.shape.bitmap.height*t.scalar,p=new DOMMatrix([Math.cos(l)*c,Math.sin(l)*c,-Math.sin(l)*u,Math.cos(l)*u,t.x,t.y]);p.multiplySelf(new DOMMatrix(t.shape.matrix));var f=e.createPattern(k.transform(t.shape.bitmap),"no-repeat");f.setTransform(p),e.globalAlpha=1-r,e.fillStyle=f,e.fillRect(t.x-d/2,t.y-h/2,d,h),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(n-a)*t.ovalScalar,Math.abs(s-o)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,r,a,o,n,i,s){e.save(),e.translate(t,r),e.rotate(n),e.scale(a,o),e.arc(0,0,1,0,s,void 0),e.restore()}(e,t.x,t.y,Math.abs(n-a)*t.ovalScalar,Math.abs(s-o)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if("star"===t.shape)for(var m=Math.PI/2*3,g=4*t.scalar,y=8*t.scalar,b=t.x,v=t.y,w=5,P=Math.PI/w;w--;)b=t.x+Math.cos(m)*y,v=t.y+Math.sin(m)*y,e.lineTo(b,v),m+=P,b=t.x+Math.cos(m)*g,v=t.y+Math.sin(m)*g,e.lineTo(b,v),m+=P;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(o)),e.lineTo(Math.floor(n),Math.floor(s)),e.lineTo(Math.floor(a),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}(h,e)}))).length?l=P.frame(t):c()})),u=c}));return{addFettis:function(e){return d=d.concat(e),p},canvas:e,promise:p,reset:function(){l&&P.cancel(l),u&&u()}}}(e,R,f,r,n),s.promise)}function b(r){var a=h||q(r,"disableForReducedMotion",Boolean),o=q(r,"zIndex",Number);if(a&&g)return c((function(e){e()}));l&&s?e=s.canvas:l&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(o),document.body.appendChild(e)),u&&!m&&f(e);var n={width:e.width,height:e.height};function i(){if(p){var t={getBoundingClientRect:function(){if(!l)return e.getBoundingClientRect()}};return f(t),void p.postMessage({resize:{width:t.width,height:t.height}})}n.width=n.height=null}function b(){s=null,u&&(d=!1,t.removeEventListener("resize",i)),l&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,m=!1)}return p&&!m&&p.init(e),m=!0,p&&(e.__confetti_initialized=!0),u&&!d&&(d=!0,t.addEventListener("resize",i,!1)),p?p.fire(r,n,b):y(r,n,b)}return b.reset=function(){p&&p.reset(),s&&s.reset()},b}function R(){return w||(w=S(null,{useWorker:!0,resize:!0})),w}r.exports=function(){return R().apply(this,arguments)},r.exports.reset=function(){R().reset()},r.exports.create=S,r.exports.shapeFromPath=function(e){if(!i)throw new Error("path confetti are not supported in this browser");var t,r;"string"==typeof e?t=e:(t=e.path,r=e.matrix);var a=new Path2D(t),o=document.createElement("canvas").getContext("2d");if(!r){for(var n,s,l=1e3,c=l,u=l,d=0,h=0,p=0;p<l;p+=2)for(var f=0;f<l;f+=2)o.isPointInPath(a,p,f,"nonzero")&&(c=Math.min(c,p),u=Math.min(u,f),d=Math.max(d,p),h=Math.max(h,f));n=d-c,s=h-u;var m=Math.min(10/n,10/s);r=[m,0,0,m,-Math.round(n/2+c)*m,-Math.round(s/2+u)*m]}return{type:"path",path:t,matrix:r}},r.exports.shapeFromText=function(e){var t,r=1,a="#000000",o='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof e?t=e:(t=e.text,r="scalar"in e?e.scalar:r,o="fontFamily"in e?e.fontFamily:o,a="color"in e?e.color:a);var n=10*r,i=n+"px "+o,s=new OffscreenCanvas(n,n),l=s.getContext("2d");l.font=i;var c=l.measureText(t),u=Math.ceil(c.actualBoundingBoxRight+c.actualBoundingBoxLeft),d=Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent),h=c.actualBoundingBoxLeft+2,p=c.actualBoundingBoxAscent+2;u+=4,d+=4,(l=(s=new OffscreenCanvas(u,d)).getContext("2d")).font=i,l.fillStyle=a,l.fillText(t,h,p);var f=1/r;return{type:"bitmap",bitmap:s.transferToImageBitmap(),matrix:[f,0,0,f,-u*f/2,-d*f/2]}}}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),n,!1);const i=n.exports;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){l=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",c=n.asyncIterator||"@@asyncIterator",u=n.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function h(e,t,r,a){var n=t&&t.prototype instanceof v?t:v,i=Object.create(n.prototype),s=new S(a||[]);return o(i,"_invoke",{value:T(e,r,s)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var f="suspendedStart",m="suspendedYield",g="executing",y="completed",b={};function v(){}function w(){}function k(){}var P={};d(P,i,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(R([])));x&&x!==r&&a.call(x,i)&&(P=x);var q=k.prototype=v.prototype=Object.create(P);function M(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,n,i,l){var c=p(e[o],e,n);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var n;o(this,"_invoke",{value:function(e,a){function o(){return new t((function(t,o){r(e,a,t,o)}))}return n=n?n.then(o,o):o()}})}function T(t,r,a){var o=f;return function(n,i){if(o===g)throw Error("Generator is already running");if(o===y){if("throw"===n)throw i;return{value:e,done:!0}}for(a.method=n,a.arg=i;;){var s=a.delegate;if(s){var l=C(s,a);if(l){if(l===b)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(o===f)throw o=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);o=g;var c=p(t,r,a);if("normal"===c.type){if(o=a.done?y:m,c.arg===b)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(o=y,a.method="throw",a.arg=c.arg)}}}function C(t,r){var a=r.method,o=t.iterator[a];if(o===e)return r.delegate=null,"throw"===a&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==a&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+a+"' method")),b;var n=p(o,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,b;var i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,n=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return n.next=n}}throw new TypeError(s(t)+" is not iterable")}return w.prototype=k,o(q,"constructor",{value:k,configurable:!0}),o(k,"constructor",{value:w,configurable:!0}),w.displayName=d(k,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,d(e,u,"GeneratorFunction")),e.prototype=Object.create(q),e},t.awrap=function(e){return{__await:e}},M(E.prototype),d(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,a,o,n){void 0===n&&(n=Promise);var i=new E(h(e,r,a,o),n);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},M(q),d(q,u,"Generator"),d(q,i,(function(){return this})),d(q,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var a in t)r.push(a);return r.reverse(),function e(){for(;r.length;){var a=r.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=R,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(a,o){return s.type="throw",s.arg=t,r.next=a,o&&(r.method="next",r.arg=e),!!o}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var i=n?n.completion:{};return i.type=e,i.arg=t,n?(this.method="next",this.next=n.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var a=r.completion;if("throw"===a.type){var o=a.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,a){return this.delegate={iterator:R(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=e),b}},t}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t,r,a,o,n,i){try{var s=e[n](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,o)}function p(){var e;return e=l().mark((function e(t,r,n,i){var s,c,d,h,p,f,m,g,y,b,v,w;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Missing notion_secret");case 2:if(r&&/^[a-f0-9]{32}$/.test(r)){e.next=4;break}throw new Error("Invalid page_id");case 4:if(n){e.next=6;break}throw new Error("Missing corsProxyUrl");case 6:return s=r.replace(/^(.{8})(.{4})(.{4})(.{4})(.{12})$/,"$1-$2-$3-$4-$5"),console.log("Formatted target_page_id:",s),c=new a.Kj({auth:t,fetch:function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(n+e,u(u({},t),{},{headers:u(u({},t.headers),{},{Origin:window.location.origin})}))}))}),e.prev=9,e.next=12,c.pages.retrieve({page_id:s});case 12:d=e.sent,e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(9),404!==e.t0.status){e.next=19;break}return e.abrupt("return",{error:"Could not find block with ID: ".concat(s,". Make sure the relevant pages and databases are shared with your integration.")});case 19:throw e.t0;case 20:if(h=d.last_edited_time,p="Untitled",d.properties&&d.properties.title&&(Array.isArray(d.properties.title.title)&&d.properties.title.title.length>0?p=d.properties.title.title[0].plain_text:"string"==typeof d.properties.title.title&&(p=d.properties.title.title)),console.log("Extracted title: ",p),!(f=localStorage.getItem("notionMarkdown"))){e.next=36;break}if(m=JSON.parse(f),g=(new Date).getTime(),!(m.expirationTime&&g<m.expirationTime)){e.next=34;break}if(m.lastEditedTime!==h){e.next=32;break}return console.log("No changes detected. Using stored data."),e.abrupt("return",u(u({},m),{},{title:p}));case 32:e.next=36;break;case 34:console.log("Stored data expired or no expiration time set."),localStorage.removeItem("notionMarkdown");case 36:return y=new o.NotionToMarkdown({notionClient:c}),e.prev=37,e.next=40,y.pageToMarkdown(s);case 40:return b=e.sent,console.log("mdblocks: ",b),v=y.toMarkdownString(b),console.log("mdString: ",v),w={lastEditedTime:h,title:p,markdown:v.parent,expirationTime:(new Date).getTime()+3e6},localStorage.setItem("notionMarkdown",JSON.stringify(w)),e.abrupt("return",w);case 49:throw e.prev=49,e.t1=e.catch(37),console.error("Error accessing Notion page:",e.t1.message),e.t1;case 53:case"end":return e.stop()}}),e,null,[[9,15],[37,49]])})),p=function(){var t=this,r=arguments;return new Promise((function(a,o){var n=e.apply(t,r);function i(e){h(n,a,o,i,s,"next",e)}function s(e){h(n,a,o,i,s,"throw",e)}i(void 0)}))},p.apply(this,arguments)}n.exports.create,window.getNotionPageMarkdown=function(e,t,r,a){return p.apply(this,arguments)},window.confetti=i})();