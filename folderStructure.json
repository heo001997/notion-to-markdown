[
  {
      "path": "content/_index.md",
      "content": "+++\narchetype = \"home\"\ntitle = \"Workshop - Site-to-Site VPN - AWS to Datacenter\"\n+++\n\nDiscover what this workshop is all about and the core-concepts behind it.\n"
  },
  {
      "id": "1",
      "path": "content/001-i-introduction/_index.md",
      "content": "+++\narchetype = \"chapter\"\ntitle = \"I. Introduction\"\nweight = 1\n+++\n\n\nA simplified Site-to-Site VPN workshop is being organized to provide an easier, cost-effective introduction for newcomers. The workshop focuses on a basic setup with fewer VPCs, subnets, and EC2 instances.\n\n\n"
  },
  {
      "id": "2",
      "path": "content/001-i-introduction/001-1-background-objectives.md",
      "content": "+++\ntitle = \"1. Background & Objectives\"\nweight = 1\n+++\n\n\nGive it up for mentor Gia Hung and his First Cloud Journey team for a great [Site-to-Site VPN workshop](https://000003.awsstudygroup.com/1-introduce/).\n\n\nInheriting that spirit, we will have a similar tour about Site-to-Site VPN but to a lesser extent, where we will have fewer VPCs, Subnets, and EC2 instances.\n\n\nWe will provide an easier point of view for newcomers, focusing only on Site-to-Site VPN with the most reasonable cost possible.\n\n\nEach piece of information is presented in bite-sized portions, making it easy to keep up with the guide without falling behind.\n\n\n"
  },
  {
      "id": "3",
      "path": "content/001-i-introduction/002-2-architecture-diagram.md",
      "content": "+++\ntitle = \"2. Architecture Diagram\"\nweight = 2\n+++\n\n\nTake a first look at what we’ll build:\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/57a35495-f431-43ff-a13b-c130f4476d5e/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171242Z&X-Amz-Expires=3600&X-Amz-Signature=a6f6fbe237d6592d18774f7bad7c7dd94a026d3035e910278acfa8f3d075f962&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nDiagram convention:\n\n\n```bash\nExample:\nEC2 - AWS - EC2 Private\nPrivate IP - 10.10.1.x\n\nExplanation:\n- The naming convention is always: <Service> - <Service Name>\nSample: EC2 - AWS - EC2 Private => <EC2> - <AWS - EC2 Private>\n\n- Other lines represent properties:\nSample: Private IP - 10.10.1.x => <Properties>\n```\n\n\nThat's everything. let's get it started.\n\n\n"
  },
  {
      "id": "4",
      "path": "content/002-ii-prerequisites-cost-estimation/_index.md",
      "content": "+++\narchetype = \"chapter\"\ntitle = \"II. Prerequisites & Cost Estimation\"\nweight = 2\n+++\n\n\nIn this section, we will lay the groundwork for the workshop by covering the necessary prerequisites and providing a detailed cost estimation, particularly with the AWS Free Tier in mind.\n\n\n"
  },
  {
      "id": "5",
      "path": "content/002-ii-prerequisites-cost-estimation/001-1-prerequisites.md",
      "content": "+++\ntitle = \"1. Prerequisites\"\nweight = 1\n+++\n\n\nIn this workshop (WS), I’ll assume that you know how to find the corresponding actions. For example, in the image below, you know you can navigate to this screen by following the breadcrumb navigation.\n\n\nExample: AWS search bar → VPC → Create VPC\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/41a12c32-2653-473d-80cc-09f6ca626354/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171242Z&X-Amz-Expires=3600&X-Amz-Signature=81d313a9c997d89258d45f58d5ed1d4721df8f91e6c8e97d3f9d00a82ff22988&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nAdditionally, we won’t delve deeply into IAM and roles, so I’ll assume that you already have an IAM user with the **AdministratorAccess** permissions policy.\n\n\nIf you don’t know how to create one, you can refer to this workshop by Gia Hung and Hoang Kha: [https://000001.awsstudygroup.com/](https://000001.awsstudygroup.com/) :gratitude-clap:\n\n\n"
  },
  {
      "id": "6",
      "path": "content/002-ii-prerequisites-cost-estimation/002-2-cost-estimation-free-tier-version-included.md",
      "content": "+++\ntitle = \"2. Cost Estimation (Free Tier Version Included)\"\nweight = 2\n+++\n\n\nSince I’m using the AWS Free Tier for 12 months, this is my cost estimation.\n\n\nI suggest that this lab should take a maximum of 1.5 hours to set up, test, and run everything.\n\n\nI’m completely ignoring data costs because the data cost in this lab is VERY, VERY LITTLE (< $0.01).\n\n\nI’ve optimized the order of enabling services to get the most cost-effective setup, so be very confident in following this workshop line by line.\n\n\nThis is the cost table for my workshop per lab.\n\n\n| ID | Service                      | Pricing | Unit | Average Usage Time (hour) | Actual cost                 |\n| -- | ---------------------------- | ------- | ---- | ------------------------- | --------------------------- |\n| 1  | VPC                          | Free    | X    | X                         | $0.00                       |\n| 2  | Subnet                       | Free    | X    | X                         | $0.00                       |\n| 3  | Route Table                  | Free    | X    | X                         | $0.00                       |\n| 4  | Security Group               | Free    | X    | X                         | $0.00                       |\n| 5  | Internet Gateway             | Free    | X    | X                         | $0.00                       |\n| 6  | Virtual Private Gateway      | Free    | X    | X                         | $0.00                       |\n| 7  | Customer Gateway             | Free    | X    | X                         | $0.00                       |\n| 8  | Elastic Compute Cloud (EC2)  | $0.0116 | 2    | 1.25 hour                 | $0.00 \n(Free Tier Included) |\n| 9  | Site-to-Site VPN Connections | $0.05   | 1    | 30                        | $0.025                      |\n\n\nSo, the final cost should be a maximum of **$0.025** for your total 1.5-hour usage time.\n\n\n"
  },
  {
      "id": "7",
      "path": "content/003-iii-setup-vpc-aws-resources/_index.md",
      "content": "+++\narchetype = \"chapter\"\ntitle = \"III. Setup VPC AWS resources\"\nweight = 3\n+++\n\n\nThese resources will act as a regular AWS cluster, I won’t set up anything related to the site-to-site connection yet.\n\n\n"
  },
  {
      "id": "8",
      "path": "content/003-iii-setup-vpc-aws-resources/001-1-vpc-aws.md",
      "content": "+++\ntitle = \"1. VPC - AWS\"\nweight = 1\n+++\n\n\nFirst things first, fill out the form and click \"Create.\"\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/0b358095-e13a-4249-a669-84ca67515889/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171242Z&X-Amz-Expires=3600&X-Amz-Signature=b99adc0576132575741497ac3cdf30a31d6076a5ce8a13aac41fdc81a876e68e&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "9",
      "path": "content/003-iii-setup-vpc-aws-resources/002-2-subnet-aws-private-subnet.md",
      "content": "+++\ntitle = \"2. Subnet - AWS - Private subnet\"\nweight = 2\n+++\n\n\nDo the same as above: fill out the form and click \"Create.\"\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/56e9e409-a0cf-430c-8edb-6fa1c5d2c1d1/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171242Z&X-Amz-Expires=3600&X-Amz-Signature=944ba3a7bcd02188b4d5b89df9ed83ad6d2b4d575d60d38f8e857a35346de326&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "10",
      "path": "content/003-iii-setup-vpc-aws-resources/003-3-route-table-aws-private.md",
      "content": "+++\ntitle = \"3. Route Table - AWS - Private\"\nweight = 3\n+++\n\n\nDo the same as above: fill out the form and click \"Create.\"\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/9f6ac04c-17fb-48fb-a54a-36d302b54876/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=a00b25488aec3736bf3454fa6568a683bb57bf71ae88bb0a7be0cc83adc9f140&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nAdd subnet association, this will allow the **Subnet - AWS - Private subnet** to follow the **Route Table - AWS - Private**’s routes.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/aeaee09f-7956-4b22-a1d2-b00c27230cc5/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=b9f4390b78e6fbc4b26d6c09b5d7d6520e62a474bc4e69ea55e1da3dcdf9ebab&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/d2e52df2-473b-4331-bde3-54b900286a86/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=5448e020c00161592cf8bcaf7588a2425cf2c1442c5c9f4f6daedd05ea1a03c0&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/85d30a7b-e3e3-4900-aa65-c72d3c34953c/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=1a2b5b3143cb3e645122a3500c0112b4e827ccdc1d302b7467bf2f4aaeb0b2fc&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "11",
      "path": "content/003-iii-setup-vpc-aws-resources/004-4-security-group-aws-private.md",
      "content": "+++\ntitle = \"4. Security Group - AWS - Private\"\nweight = 4\n+++\n\n\nFill out the form and click \"Create.\" This will **allow** other **EC2 instances** to **ping all EC2** **instances** in the Subnet - **AWS - Private subnet** if they can reach each other.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/5b59a42a-d43f-457e-abfb-6084a1b5a34b/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=785b4980a66470270461ab67c7f737e441902c00a5fdc693171801792739f9fb&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "12",
      "path": "content/003-iii-setup-vpc-aws-resources/005-5-ec2-aws-ec2-private.md",
      "content": "+++\ntitle = \"5. EC2 - AWS - EC2 Private\"\nweight = 5\n+++\n\n\nThis form is quite long, so we will fill it out step by step.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/b5018226-36ec-4e95-a65c-6cf2a10e77aa/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=0b70b5bb0650f9348c00f89838004eeac1f648de03b699ae2b3e2277814095e0&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nCreate a key pair to be able to SSH into **AWS - EC2 - Private** if you don’t already have one.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/b91c40ad-eb69-4175-8a44-2980d709c864/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=8843748f856be2520b2d954ae3068e08da67f37d8cd5ab4073bef625cf9d7396&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/d8a694e6-9e80-4143-bf2f-de202544e9d6/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=814a8171002a49a939ac9fdd80a9ed334aeb94e70207eff95842a4a0b9bc176e&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nAfter creating the key pair, you can select it now.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/f0770b20-a220-4560-8b7a-5ac33d96de85/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=9f871ac6350c0dd63c2fd52baba40852806094672a097b234494bc4d70bf0da6&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nFor network settings, we will edit them as follows:\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/c595234b-dbdc-4f83-b684-4c350daca38e/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=94f9dea4f13ef3d8756d3e8a1a74f1358441cb5e996b01bab8951dba3452ac0b&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nWe can click \"Launch Instance\" now, leaving the other settings at their defaults is fine.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/79b9cff1-0e52-4a72-87af-dae0b5516d0d/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=1e0f944c366883f9d653d6233f7308c37502270c41863d8a1461d7041ebf8b61&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nNow, we’re done setting up the VPC AWS resources!\n\n\n"
  },
  {
      "id": "13",
      "path": "content/004-iv-setup-vpc-dc-resources/_index.md",
      "content": "+++\narchetype = \"chapter\"\ntitle = \"IV. Setup VPC DC resources\"\nweight = 4\n+++\n\n\nMove on to this step, this will create resources to act as a regular on-premises data center. Like the previous step, I won’t set up anything related to the site-to-site connection yet.\n\n\n"
  },
  {
      "id": "14",
      "path": "content/004-iv-setup-vpc-dc-resources/001-1-vpc-dc.md",
      "content": "+++\ntitle = \"1. VPC - DC\"\nweight = 1\n+++\n\n\nFill out the form and click \"Create.\"\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/0d6aadf7-3b64-4164-9e03-6a82b8f04360/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=87fdbafd35674ad794752f7dee25184c241ad19da1f64d7bf1c1f732b428f767&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "15",
      "path": "content/004-iv-setup-vpc-dc-resources/002-2-subnet-dc-public-subnet.md",
      "content": "+++\ntitle = \"2. Subnet - DC - Public subnet\"\nweight = 2\n+++\n\n\nDo the same as above: fill out the form and click \"Create\".\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/ec7238df-60d0-40b0-9d18-4168eb7c0421/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=6d9ca80c4d65922236643d4c4ea5ddd88576f2d16d7e963ba14cf86ac7e27daa&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "16",
      "path": "content/004-iv-setup-vpc-dc-resources/003-3-route-table-dc-public.md",
      "content": "+++\ntitle = \"3. Route Table - DC - Public\"\nweight = 3\n+++\n\n\nDo the same as above: fill out the form and click \"Create\".\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/51553b32-bb31-495a-8752-0d9b66fa1c49/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=8c53405cab8a714bcb89ca49d5fc8a865324e0661859bffaec4105bfbaf3f6e7&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nAssociate this route with the **DC - Public subnet**.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/82961b2d-68e2-4632-908b-0b84c43007e8/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=10a45f1b4f7f3119b0546f9109084b4416689c1674a391fa4ed53951c512e259&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/de863335-49b5-4fd0-86b3-a2b0a61a5efd/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=82e23a175095acd26eac3e835167694265dac2603e388e3f30c944678f26bd85&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "17",
      "path": "content/004-iv-setup-vpc-dc-resources/004-4-security-group-dc-public.md",
      "content": "+++\ntitle = \"4. Security Group - DC - Public\"\nweight = 4\n+++\n\n\nFill out the form and click \"Create.\" This will **allow** any client (computer, laptop, server, etc.) to **ping all EC2 instances** in the **Subnet - DC - Public** subnet if they can \"see\" each other.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/90ef2fd8-8309-4cdf-8a70-aff67ad95069/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=291310ccc00c6e4a5c550c1d32afac5f45118579740e1dcc0ad622f110359a0f&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "18",
      "path": "content/004-iv-setup-vpc-dc-resources/005-5-internet-gateway-dc-igw.md",
      "content": "+++\ntitle = \"5. Internet Gateway - DC - IGW\"\nweight = 5\n+++\n\n\nCreate an Internet Gateway - DC - IGW to allow the DC - VPC to connect to the internet.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/2dc2ede2-912f-4c54-983f-33230a1e25f6/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=5e82255857c960f30b0dd77192d87620994933b6d0ce81ced5f7ef83251f5b44&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nAttach it to **VPC - DC**\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/bc9962b3-3b6b-4146-95ec-fa20b3e0417e/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=808ee6fd063f9dc30c3fed4ed1281f0cf9fedfe68b71f6e1b0695e64508d7acf&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/9d52f744-bcd0-419e-aef7-9cf1383ae06d/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171243Z&X-Amz-Expires=3600&X-Amz-Signature=eb984e6f8eb6a0f41ddf38b20ef3054b30cf30323ddf3d8aae3e06fc3f6024b9&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nGo back to the Route Table and edit it to accept the attached Internet Gateway.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/df0364d1-faff-4346-a66f-bd7c3f361296/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=e413f796ffb864d88737c17f9f216264d6e556f2ba114260c1b094670595198d&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/8d516c8e-c307-4d41-8060-10080477035f/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=2c03fabf16442f3c8d0f5d424c5c7f3e6962c0275b1e5aa6048c5fc31e15330b&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nThe route should look like this\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/950790c5-069b-4222-9591-a8819bd38aa7/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=331b1e9dfd44b3be7cc7d6e24ead6946bc43f77069655b7e8e29dce46d2de8ea&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "19",
      "path": "content/004-iv-setup-vpc-dc-resources/006-6-ec2-dc-ec2-openswan-gateway/_index.md",
      "content": "+++\ntitle = \"6. EC2 - DC - EC2 Openswan Gateway\"\nweight = 6\n+++\n\n\n"
  },
  {
      "id": "20",
      "path": "content/004-iv-setup-vpc-dc-resources/006-6-ec2-dc-ec2-openswan-gateway/001-6-1-create-dc-ec2-openswan-gateway.md",
      "content": "+++\ntitle = \"6.1 Create DC - EC2 Openswan Gateway\"\nweight = 1\n+++\n\n\nThis form is quite long, so we will fill it out step by step.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/68379cf6-81c1-4bdd-b50c-97f882a75c39/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=c318205ceb6e4ec9a88143573e787049c5b7eaf21148d8f14ef54592c745e493&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nCreate a key pair to be able to SSH into AWS - EC2 - Private if you don’t already have one.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/3e8f3b13-abe4-476a-9702-c922dd617d30/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=144b2bb39159b8ffbed14f4d7968e8cb7706406b4ea6af38cd5afd20c031631d&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/2de80525-c893-42fc-babd-52d67f9add5b/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=ab51691e24328b0820adf0b8a9435a6b1bbaccf3c630bc43215cb7a3e51caf81&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nSelect the newly created key pair.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/19e053e9-2c19-4295-9a2f-b7329afb1be8/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=547f6d89717e6ed204ba2b4a7a53bd5d82c366ba0ebe284f64c303ddc3c64967&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nEdit Network like this\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/3b2c7b64-dabe-43be-9af1-318c8bab86cc/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=7bd5bed624bef7e0c0ee4b8a37ee8437ad644c31fde1a29f9426740611ae277d&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nWe can click \"Launch Instance\" now, leaving the other settings at their defaults is fine.\n\n\n"
  },
  {
      "id": "21",
      "path": "content/004-iv-setup-vpc-dc-resources/006-6-ec2-dc-ec2-openswan-gateway/002-6-2-verify-ssh-able-from-myip.md",
      "content": "+++\ntitle = \"6.2 Verify SSH-able from MyIP\"\nweight = 2\n+++\n\n\nLet’s go to the Instance Details, you can see that DC - EC2 Openswan Gateway is already up with a Public IPv4 address.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/79c40755-2a43-4aa6-a1c5-d8aefe0fd69c/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=a8511f9d78fd6ad2e80281e5c6954ff2247792e7a905600ed90f13da35b2cceb&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nOpen your terminal and connect via SSH to the **DC - EC2 Openswan Gateway** using the `dc-ec2-openswan-gateway.pem` file we already downloaded.\n\n\nNote: Lines preceded by ‘#’ are comments, so you don’t have to run those commands in the terminal.\n\n\n```bash\n# Modify keypair permission (required by AWS)\nFormat:\nchmod 400 <path to the dc-ec2-openswan-gateway.pem key>\n\nExample - my filled command:\nchmod 400 Downloads/dc-ec2-openswan-gateway.pem\n\n\n# Start SSH\nFormat:\nssh -i <path to the dc-ec2-openswan-gateway.pem key> ec2-user@<Public IPv4>\n\nExample - my filled command:\nssh -i Downloads/dc-ec2-openswan-gateway.pem ec2-user@54.85.149.143\n```\n\n\nI can SSH into the **DC - EC2 Openswan Gateway** from my local computer now.\n\n\n```bash\n ~  ssh -i Downloads/dc-ec2-openswan-gateway.pem ec2-user@54.85.149.143                                                                                 ✔ │ 3.3.0  │ 12:14:37 AM \n   ,     #_\n   ~\\_  ####_        Amazon Linux 2\n  ~~  \\_#####\\\n  ~~     \\###|       AL2 End of Life is 2025-06-30.\n  ~~       \\#/ ___\n   ~~       V~' '->\n    ~~~         /    A newer version of Amazon Linux is available!\n      ~~._.   _/\n         _/ _/       Amazon Linux 2023, GA and supported until 2028-03-15.\n       _/m/'           https://aws.amazon.com/linux/amazon-linux-2023/\n\n[ec2-user@ip-192-168-1-206 ~]$ whoami\nec2-user\n\n```\n\n\n"
  },
  {
      "id": "22",
      "path": "content/004-iv-setup-vpc-dc-resources/006-6-ec2-dc-ec2-openswan-gateway/003-6-3-verify-internet-connection-and-dns-resolution.md",
      "content": "+++\ntitle = \"6.3 Verify internet connection and DNS resolution\"\nweight = 3\n+++\n\n\nTry to ping AWS\n\n\n```bash\nping amazon.com -c5\n```\n\n\nIt’s all good\n\n\n```bash\n[ec2-user@ip-192-168-1-206 ~]$ ping amazon.com -c5\nPING amazon.com (54.239.28.85) 56(84) bytes of data.\n64 bytes from 54.239.28.85 (54.239.28.85): icmp_seq=1 ttl=250 time=1.25 ms\n64 bytes from 54.239.28.85 (54.239.28.85): icmp_seq=2 ttl=250 time=0.667 ms\n64 bytes from 54.239.28.85 (54.239.28.85): icmp_seq=3 ttl=250 time=0.974 ms\n64 bytes from 54.239.28.85 (54.239.28.85): icmp_seq=4 ttl=250 time=0.976 ms\n64 bytes from 54.239.28.85 (54.239.28.85): icmp_seq=5 ttl=250 time=1.34 ms\n\n--- amazon.com ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4017ms\nrtt min/avg/max/mdev = 0.667/1.043/1.340/0.238 ms\n```\n\n\nIn case your ping fails, try the command below and ping again.\n\n\n```bash\n# This should resolve the DNS problem\nsudo sh -c \"echo nameserver 1.1.1.1 > /etc/resolv.conf\"\n```\n\n\n"
  },
  {
      "id": "23",
      "path": "content/005-v-prepare-for-site-to-site-vpn-aws-to-dc/_index.md",
      "content": "+++\narchetype = \"chapter\"\ntitle = \"V. Prepare for Site-to-Site VPN - AWS to DC\"\nweight = 5\n+++\n\n\n"
  },
  {
      "id": "24",
      "path": "content/005-v-prepare-for-site-to-site-vpn-aws-to-dc/001-1-virtual-private-gateway-aws-pgw.md",
      "content": "+++\ntitle = \"1. Virtual Private Gateway - AWS - PGW\"\nweight = 1\n+++\n\n\nCreate a new Virtual Private Gateway - **AWS - PGW**\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/330d9412-b5e2-41c2-86ba-66c9f4fa82d6/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=5e530661254e6955085b6743410b213fdec8a4490783eac5458b02c8d98ccfe2&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nRefresh the page if it says \"Success\" but shows nothing.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/d3b02044-81aa-4990-af24-c7140f784c21/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=b1fe718befb5895a31f7fffa943a89071f5ec953d257cad7a3b03661591b1acd&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nSelect and attach it to **VPC - AWS**\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/c4bb2bf1-9956-42f9-8d1a-6319b893192e/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=10d03c4ea7c2992d89dc22de0fab60d7983946dde135e4b1676dadb0e396feb2&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nEdit the Route Table - **AWS - Private** so it can route traffic from this VGW.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/3e4acad0-4c0e-4f11-86b1-bd63fb30145d/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=4585222f699f9a69f0be4e6323b12869e07adde2c6b1514121c57da6341a113f&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/424b778e-2ce9-487e-99e5-b179a35f49d6/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=3d7ed22031874610fb0216447823fcb42efbf82f6120fd611914bd1e8d9a60e5&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/5c412718-7ea4-47b9-b63b-6b0c0f33ebc7/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=149c8cacf9675890e7c73c5a613598fb328757a3f16a46663be1285c7a9115d5&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "25",
      "path": "content/005-v-prepare-for-site-to-site-vpn-aws-to-dc/002-2-customer-gateway-dc-cgw.md",
      "content": "+++\ntitle = \"2. Customer Gateway - DC - CGW\"\nweight = 2\n+++\n\n\nCreate a Customer Gateway, this will be used for the Site-to-Site connection to identify which customer gateway it will connect to.\n\n\nThe **IP address** is your **DC - EC2 - Openswan Gateway IPv4 Public Address** (the same one we used for the SSH check).\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/fb430193-1289-4cd2-86d0-857538ce770e/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=67d714fc19fddb209c84af28ca8ffe571a38c64ed36f4d6a2e450863f1190b0f&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "26",
      "path": "content/006-vi-site-to-site-vpn-aws-to-dc/_index.md",
      "content": "+++\narchetype = \"chapter\"\ntitle = \"VI. Site-to-Site VPN - AWS to DC\"\nweight = 6\n+++\n\n\n"
  },
  {
      "id": "27",
      "path": "content/006-vi-site-to-site-vpn-aws-to-dc/001-1-setup-site-to-site-vpn-aws-to-dc.md",
      "content": "+++\ntitle = \"1. Setup Site-to-Site VPN - AWS to DC\"\nweight = 1\n+++\n\n\nFill out the form as follows, with explanations:\n\n1. **Static IP Prefixes:** You will need to fill in two CIDRs. The first is our **VPC - DC (192.168.0.0/16)**, and the second is **VPC - AWS (10.10.0.0/16)**.\n2. **Local IPv4 Network CIDR:** Fill in our **VPC - DC** CIDR **(192.168.0.0/16)**.\n3. **Remote IPv4 Network CIDR:** Fill in our **VPC - AWS** CIDR **(10.10.0.0/16)**.\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/9d504ed3-e661-48c3-bdad-49e63cd32849/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=25afd32267dabe9368517b4a53372f06fe0eb7d795f9c36ce40cb76b8093ad7b&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nThat’s everything, click \"Create\" You should see the new VPN connection from **AWS to DC**. We will move on to the next step while waiting for this VPN to be ready.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/a1e2e5d9-c7f5-4910-9e33-66561c005baf/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=b4f21af7251a7510801db69ff32be5fc1c3ae67be430c68a585a56cf7bac6596&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "28",
      "path": "content/006-vi-site-to-site-vpn-aws-to-dc/002-2-setup-openswan-on-ec2-dc-ec2-openswan-gateway.md",
      "content": "+++\ntitle = \"2. Setup Openswan on EC2 - DC - EC2 Openswan Gateway\"\nweight = 2\n+++\n\n\nClick \"Download Configuration\" We will use this configuration to set up our Openswan gateway.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/6f70348e-d33e-45dd-8a40-a1f9bb8e07e5/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=f8f050050647459da99b7d8b9f60fadc0049c488d73e87cba30694d85d95c0ed&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nSelect the options as shown, and click \"Download\"\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/a86bca94-8776-41fb-b791-37ad1ceeea70/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=fc168beef7dfcb3b19f81a4a71978537b09ce6a4a95f6102c5b7baa8ee530d41&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nOpen that file, and you can see all the instructions. You can read it to learn more details.\n\n\nFor now, let’s focus on certain parts of the `IPSEC Tunnel #1` configuration, such as `conn` and `secrets`, as shown below:\n\n\n```bash\n---\nIPSEC Tunnel #1\n---\n...\nconn Tunnel1\n\tauthby=secret\n\tauto=start\n\tleft=%defaultroute\n\tleftid=54.85.149.143\n\tright=3.225.20.219\n\ttype=tunnel\n\tikelifetime=8h\n\tkeylife=1h\n\tphase2alg=aes128-sha1;modp1024\n\tike=aes128-sha1;modp1024\n\tauth=esp\n\tkeyingtries=%forever\n\tkeyexchange=ike\n\tleftsubnet=<LOCAL NETWORK>\n\trightsubnet=<REMOTE NETWORK>\n\tdpddelay=10\n\tdpdtimeout=30\n\tdpdaction=restart_by_peer\n...\n5) Create a new file at /etc/ipsec.d/aws.secrets if it doesn't already exist, and append this line to the file (be mindful of the spacing!):\n54.85.149.143 3.225.20.219: PSK \"yioHTXdE29JV2HmcDpx8nXhzQwkdR5FW\"\n...\n```\n\n\nWe’ll need to use these two configurations/credentials, and we will build the command to add the `conn` configuration as follows:\n\n1. Remove `auth=esp` to avoid conflicts with the Amazon Linux 2 AMI - VPN configuration.\n2. Update `leftsubnet=192.168.0.0/16` to match the current **VPC - DC** CIDR (Local).\n3. Update `rightsubnet=10.10.0.0/16` to match the current VPC **VPC - AWS** CIDR (Remote).\n4. Keep everything else in the configuration the same.\n\nSo my `add conn` command will look like this:\n\n\n```bash\nsudo bash -c 'cat <<EOF > /etc/ipsec.d/aws.conf\nconn Tunnel1\n  authby=secret\n  auto=start\n  left=%defaultroute\n  leftid=54.85.149.143\n  right=3.225.20.219\n  type=tunnel\n  ikelifetime=8h\n  keylife=1h\n  phase2alg=aes128-sha1;modp1024\n  ike=aes128-sha1;modp1024\n  keyingtries=%forever\n  keyexchange=ike\n  leftsubnet=192.168.0.0/16\n  rightsubnet=10.10.0.0/16\n  dpddelay=10\n  dpdtimeout=30\n  dpdaction=restart_by_peer\nEOF'\ncat /etc/ipsec.d/aws.conf\n```\n\n\nNext step, look at the remaining parts of the downloaded configuration file.\n\n\n```bash\n5) Create a new file at /etc/ipsec.d/aws.secrets if it doesn't already exist, and append this line to the file (be mindful of the spacing!):\n54.85.149.143 3.225.20.219: PSK \"yioHTXdE29JV2HmcDpx8nXhzQwkdR5FW\"\n```\n\n\nWe will build our `add secret` command by inserting the key in the middle of this command.\n\n\n```bash\nsudo bash -c 'cat <<EOF > /etc/ipsec.d/aws.secrets\n54.85.149.143 3.225.20.219: PSK \"yioHTXdE29JV2HmcDpx8nXhzQwkdR5FW\"\nEOF'\ncat /etc/ipsec.d/aws.secrets\n```\n\n\nNice! Now SSH into **DC - EC2 - Openswan Gateway** again. We will follow a series of steps to set up Openswan.\n\n\n```bash\n# Change to su user, we will have full permissions to run all commands\nsudo su\n\n# Install openswan\nyum install openswan -y\n\n# Edit `/etc/sysctl.conf` to avoid redirect attach\nsudo bash -c 'cat <<EOF > /etc/sysctl.conf\nnet.ipv4.ip_forward = 1\nnet.ipv4.conf.all.accept_redirects = 0\nnet.ipv4.conf.all.send_redirects = 0\nEOF'\ncat /etc/sysctl.conf\n\n# Run the `add conn command` that you just built\n# This is my `add conn command` command, remember to run YOUR instead\nsudo bash -c 'cat <<EOF > /etc/ipsec.d/aws.conf\nconn Tunnel1\n  authby=secret\n  auto=start\n  left=%defaultroute\n  leftid=54.85.149.143\n  right=3.225.20.219\n  type=tunnel\n  ikelifetime=8h\n  keylife=1h\n  phase2alg=aes128-sha1;modp1024\n  ike=aes128-sha1;modp1024\n  keyingtries=%forever\n  keyexchange=ike\n  leftsubnet=192.168.0.0/16\n  rightsubnet=10.10.0.0/16\n  dpddelay=10\n  dpdtimeout=30\n  dpdaction=restart_by_peer\nEOF'\ncat /etc/ipsec.d/aws.conf\n\n# Run the `add secret command` that you just built\n# This is my `add secret command` command, remember to run YOUR instead\nsudo bash -c 'cat <<EOF > /etc/ipsec.d/aws.secrets\n54.85.149.143 3.225.20.219: PSK \"yioHTXdE29JV2HmcDpx8nXhzQwkdR5FW\"\nEOF'\ncat /etc/ipsec.d/aws.secrets\n\n# Apply new config and restart **Network service & IPsec service**\nsudo sysctl -p # Apply new sysctl config\nsudo chkconfig ipsec on # Ensures IPsec service is enabled on boot.\nsudo service network restart\nsudo service ipsec restart\n\n# Read IPsec log \nsudo journalctl -u ipsec -f\n\n```\n\n\nCheck if IPsec has started yet\n\n\n```bash\n# Check IPsec and network status\nsudo service ipsec status\n```\n\n\nMine is good now, you can see it shows `Active: active (running)`\n\n\n```bash\n[root@ip-192-168-1-206 ec2-user]# sudo service ipsec status \nRedirecting to /bin/systemctl status ipsec.service\n● ipsec.service - Internet Key Exchange (IKE) Protocol Daemon for IPsec\n   Loaded: loaded (/usr/lib/systemd/system/ipsec.service; enabled; vendor preset: disabled)\n   Active: active (running) since Tue 2024-08-27 18:16:26 UTC; 35s ago\n     Docs: man:ipsec(8)\n           man:pluto(8)\n           man:ipsec.conf(5)\n  Process: 1168 ExecStartPre=/usr/sbin/ipsec --checknflog (code=exited, status=0/SUCCESS)\n  Process: 1162 ExecStartPre=/usr/sbin/ipsec --checknss (code=exited, status=0/SUCCESS)\n  Process: 628 ExecStartPre=/usr/libexec/ipsec/_stackmanager start (code=exited, status=0/SUCCESS)\n  Process: 626 ExecStartPre=/usr/libexec/ipsec/addconn --config /etc/ipsec.conf --checkconfig (code=exited, status=0/SUCCESS)\n Main PID: 1186 (pluto)\n   Status: \"Startup completed.\"\n   CGroup: /system.slice/ipsec.service\n           └─1186 /usr/libexec/ipsec/pluto --leak-detective --config /etc/ipsec.conf --nofork\n\nAug 27 18:16:26 ip-192-168-1-206.ec2.internal pluto[1186]: | setup callback for interface eth0:500 fd 15\nAug 27 18:16:26 ip-192-168-1-206.ec2.internal pluto[1186]: loading secrets from \"/etc/ipsec.secrets\"\nAug 27 18:16:26 ip-192-168-1-206.ec2.internal pluto[1186]: loading secrets from \"/etc/ipsec.d/aws.secrets\"\nAug 27 18:16:26 ip-192-168-1-206.ec2.internal pluto[1186]: \"Tunnel1\" #1: initiating Main Mode\nAug 27 18:16:26 ip-192-168-1-206.ec2.internal pluto[1186]: \"Tunnel1\" #1: STATE_MAIN_I2: sent MI2, expecting MR2\nAug 27 18:16:26 ip-192-168-1-206.ec2.internal pluto[1186]: \"Tunnel1\" #1: STATE_MAIN_I3: sent MI3, expecting MR3\nAug 27 18:16:26 ip-192-168-1-206.ec2.internal pluto[1186]: \"Tunnel1\" #1: Peer ID is ID_IPV4_ADDR: '3.225.20.219'\nAug 27 18:16:26 ip-192-168-1-206.ec2.internal pluto[1186]: \"Tunnel1\" #1: STATE_MAIN_I4: ISAKMP SA established {auth=PRESHARED_KEY cipher=aes_128 integ=sha group=MODP1024}\nAug 27 18:16:26 ip-192-168-1-206.ec2.internal pluto[1186]: \"Tunnel1\" #2: initiating Quick Mode PSK+ENCRYPT+TUNNEL+PFS+UP+IKEV1_ALLOW+IKEV2_ALLOW+SAREF_TRACK+IKE_FRAG_AL...=MODP1024}\nAug 27 18:16:27 ip-192-168-1-206.ec2.internal pluto[1186]: \"Tunnel1\" #2: STATE_QUICK_I2: sent QI2, IPsec SA established tunnel mode {ESP/NAT=>0xc4f820fd <0x5b2d1f92 xfr...PD=active}\nHint: Some lines were ellipsized, use -l to show in full.\n```\n\n\n"
  },
  {
      "id": "29",
      "path": "content/006-vi-site-to-site-vpn-aws-to-dc/003-3-verify-connection-from-ec2-openswan-gateway-to-aws-ec2-private.md",
      "content": "+++\ntitle = \"3. Verify connection from EC2 Openswan Gateway to AWS - EC2 Private\"\nweight = 3\n+++\n\n\nDouble-check if it’s truly connected to **AWS - EC2 Private’s** Private IPv4.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/bc63c416-3600-4e66-8053-75229d7f0d4b/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=50714e301a7010f9b7745215082352717d0d89bf80f45219a43405b2c95cb010&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n```bash\nping 10.10.1.141 -c5\n```\n\n\nIt’s ok now\n\n\n```bash\n[root@ip-192-168-1-206 ec2-user]# ping 10.10.1.141 -c5\nPING 10.10.1.141 (10.10.1.141) 56(84) bytes of data.\n64 bytes from 10.10.1.141: icmp_seq=1 ttl=254 time=1.86 ms\n64 bytes from 10.10.1.141: icmp_seq=2 ttl=254 time=1.83 ms\n64 bytes from 10.10.1.141: icmp_seq=3 ttl=254 time=1.53 ms\n64 bytes from 10.10.1.141: icmp_seq=4 ttl=254 time=2.07 ms\n64 bytes from 10.10.1.141: icmp_seq=5 ttl=254 time=1.67 ms\n\n--- 10.10.1.141 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4007ms\nrtt min/avg/max/mdev = 1.532/1.796/2.079/0.193 ms\n```\n\n\nIf we can ping, then Tunnel 1 in the VPN connection details must be Up. If the status is still Down for both tunnels, it’s likely because it takes some time to re-check the connection.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/7368c218-edee-4463-86ec-37f1251732cb/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171244Z&X-Amz-Expires=3600&X-Amz-Signature=1b993f907958b6906622dc20839d6eb6231404831c1367cb995472f7b56c8c96&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nIn this workshop, I’ll only use one tunnel, because with my current Static IP VPN connection strategy, it would cause **random asymmetric routing** if I use 2 tunnels in my VPN. You can still use 2 tunnels and avoid this issue by using a Dynamic IP (try it if you’re a curious cat).\n\n\n"
  },
  {
      "id": "30",
      "path": "content/006-vi-site-to-site-vpn-aws-to-dc/004-4-test-ssh-from-dc-ec2-openswan-gateway-to-aws-ec2-private.md",
      "content": "+++\ntitle = \"4. Test SSH from DC - EC2 Openswan Gateway to AWS - EC2 Private\"\nweight = 4\n+++\n\n\nFirst, we edit the Security Group - **AWS - Private** to allow SSH from **DC - EC2 Openswan Gateway**.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/255fe5cf-8ee6-4d87-8eb9-5e7bef5c3843/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171246Z&X-Amz-Expires=3600&X-Amz-Signature=0ac0b552931eb86a395ed3e928d8a0898ef12239e6bb79e808a4ca0863f259c9&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nFill in the IPv4 Private address of **DC - EC2 Openswan Gateway** with a subnet mask of /32.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/59471b7d-398e-4600-b61a-6f1de86abd3a/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171246Z&X-Amz-Expires=3600&X-Amz-Signature=44fa8715e2908727d5c25178395082cafa9b6b2bbacca1bbb704036d957442c6&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/c9c35b04-9b5e-4767-bee5-b8457fe57dee/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171246Z&X-Amz-Expires=3600&X-Amz-Signature=d31bdc7d39c434562cbf85997d00749b03f966eb130aff2bb0215ec2087a22c9&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nNow we’re allowed to SSH into **AWS - Private** if the connecting IP matches.\n\n\nIf you’re wondering why it’s an **IPv4 Private** address, it’s because the VPN connection is already set up. The two servers now think they’re on the same network, they no longer consider themselves connected through the internet, so they use IPv4 Private addresses to connect.\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/09747000-41dd-49e7-ad83-b1ab40f340c7/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171246Z&X-Amz-Expires=3600&X-Amz-Signature=0ac20f0ad81d08f7a1f4adce6ffe2617067c53d8a9a90c1ec9733067765fdb5e&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nIf we want SSH to be possible, we will need to transfer the **AWS - EC2 Private** key (`aws-ec2-private.pem`) from our local machine to **DC - EC2 Openswan Gateway**.\n\n\n```bash\n# Modify keypair permission (required by AWS)\nFormat:\nchmod 400 <path to the aws-ec2-private.pem key>\n\nExample - my filled command:\nchmod 400 Downloads/aws-ec2-private.pem\n\n\n# Copy the key from local machine to DC - EC2 Openswan Gateway\nFormat:\nscp -i <path to the dc-ec2-openswan-gateway.pem key> <path to the aws-ec2-private.pem key> ec2-user@<Public IPv4> \n\nExample - my filled command:\nscp -i Downloads/dc-ec2-openswan-gateway.pem Downloads/aws-ec2-private.pem ec2-user@54.85.149.143:/home/ec2-user/ \n```\n\n\nIt looks like this if your copy is successful.\n\n\n```bash\n ~  scp -i Downloads/dc-ec2-openswan-gateway.pem Downloads/aws-ec2-private.pem ec2-user@54.85.149.143:/home/ec2-user/                               INT ✘ │ 3.3.0  │ 01:40:24 AM \naws-ec2-private.pem     100% 1678     6.4KB/s   00:00    \n```\n\n\nSSH again into **DC - EC2 Openswan Gateway** (use your previous command, I won’t rewrite the instructions here).\n\n\nType `ls` to show all files. You should see the key to SSH into **AWS - EC2 Private** there.\n\n\n```bash\n[ec2-user@ip-192-168-1-206 ~]$ ls\naws-ec2-private.pem\n```\n\n\nRun the SSH command now\n\n\n```bash\n# Modify keypair permission (required by AWS)\nFormat:\nssh -i aws-ec2-private.pem ec2-user@<AWS - EC2 Private - Private IPv4>\n\nExample - my filled command:\nssh -i aws-ec2-private.pem ec2-user@10.10.1.141\n```\n\n\nI can SSH into **DC - EC2 Openswan Gateway** from my local computer now.\n\n\n```bash\n[ec2-user@ip-192-168-1-206 ~]$ ssh -i aws-ec2-private.pem ec2-user@10.10.1.141\nLast login: Tue Aug 27 18:52:11 2024 from 192.168.1.206\n   ,     #_\n   ~\\_  ####_        Amazon Linux 2\n  ~~  \\_#####\\\n  ~~     \\###|       AL2 End of Life is 2025-06-30.\n  ~~       \\#/ ___\n   ~~       V~' '->\n    ~~~         /    A newer version of Amazon Linux is available!\n      ~~._.   _/\n         _/ _/       Amazon Linux 2023, GA and supported until 2028-03-15.\n       _/m/'           https://aws.amazon.com/linux/amazon-linux-2023/\n\n[ec2-user@ip-10-10-1-141 ~]$ who\nec2-user pts/0        2024-08-27 19:00 (192.168.1.206)\n```\n\n\n"
  },
  {
      "id": "31",
      "path": "content/007-vii-conclusion/_index.md",
      "content": "+++\narchetype = \"chapter\"\ntitle = \"VII. Conclusion\"\nweight = 7\n+++\n\n\nVoila! What a journey!\n\n\nIn this workshop, we’ve tackled everything—from architecting an overview to cost estimating, setting up preconditions, configuring, and verifying...\n\n\nEven though this workshop was relatively straightforward, I believe we had a lot of fun tinkering, scripting, and completing all the tasks.\n\n\nI’m thrilled to have been here with you today, and I hope you enjoyed the experience as much as I did. ❤️\n\n\nSee you in the next workshop!\n\n\nBUT DON’T FORGET TO CLEAN UP YOUR STUFF! :)))\n\n\n"
  },
  {
      "id": "32",
      "path": "content/008-viii-clean-it-up/_index.md",
      "content": "+++\narchetype = \"chapter\"\ntitle = \"VIII. Clean it up!!!\"\nweight = 8\n+++\n\n\n"
  },
  {
      "id": "33",
      "path": "content/008-viii-clean-it-up/001-1-goodbye-ec2-instances.md",
      "content": "+++\ntitle = \"1. Goodbye EC2 instances\"\nweight = 1\n+++\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/40a8a6d1-b96a-4478-94f9-eb873193f17d/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171246Z&X-Amz-Expires=3600&X-Amz-Signature=0f64228a9a1b41b0efecb9f87faf5ce7f41219b5c3927637be8cf9db470a699e&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "34",
      "path": "content/008-viii-clean-it-up/002-2-goodbye-vpcs.md",
      "content": "+++\ntitle = \"2. Goodbye VPCs\"\nweight = 2\n+++\n\n\nDelete VPCs with subnet too, nice\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/618c1bc8-bfca-4ac3-b618-580693b743da/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171246Z&X-Amz-Expires=3600&X-Amz-Signature=00c20d2f7d1506af2b44054f0d3a5380150c75bc1d346d86dc2016106202c823&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/60597ad3-2ee6-4d68-8341-5902d90e8410/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171246Z&X-Amz-Expires=3600&X-Amz-Signature=197dfd671cacf40b534250b045a5fe3ae8559859502a68a8f359336e7635ca49&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nDelete AWS with it’s Subnet too\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/a817720f-db1b-4240-a287-28d3b163e440/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171246Z&X-Amz-Expires=3600&X-Amz-Signature=bc5495e150cf105cd08e79bc106a305a5e75b3aa2f8fa4395add08f8f51fb785&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "35",
      "path": "content/008-viii-clean-it-up/003-3-goodbye-subnets.md",
      "content": "+++\ntitle = \"3. Goodbye Subnets\"\nweight = 3\n+++\n\n\nShould be auto deleted when VPC deleted\n\n\n"
  },
  {
      "id": "36",
      "path": "content/008-viii-clean-it-up/004-4-goodbye-route-tables.md",
      "content": "+++\ntitle = \"4. Goodbye Route Tables\"\nweight = 4\n+++\n\n\nShould be auto deleted when VPC deleted\n\n\n"
  },
  {
      "id": "37",
      "path": "content/008-viii-clean-it-up/005-5-goodbye-security-groups.md",
      "content": "+++\ntitle = \"5. Goodbye Security Groups\"\nweight = 5\n+++\n\n\nShould be auto deleted when VPC deleted\n\n\n"
  },
  {
      "id": "38",
      "path": "content/008-viii-clean-it-up/006-6-goodbye-internet-gateways.md",
      "content": "+++\ntitle = \"6. Goodbye Internet Gateways\"\nweight = 6\n+++\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/dc4fef95-50e6-4092-94a4-ec4323ad522c/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171246Z&X-Amz-Expires=3600&X-Amz-Signature=9bdea13dd48939df6d837234e10a0bdfc73479520cc2ca3aba6698f40cdad590&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/e837f1d0-b72f-4b3d-96b6-a8742780d449/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171246Z&X-Amz-Expires=3600&X-Amz-Signature=7862191c74380e7a4c1fb90d2c6cb035867cb37f7931d0096c26b044df6777c0&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "39",
      "path": "content/008-viii-clean-it-up/007-7-goodbye-setup-site-to-site-vpns.md",
      "content": "+++\ntitle = \"7. Goodbye Setup Site-to-Site VPNs\"\nweight = 7\n+++\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/43701e60-6c41-4c79-a14b-1a5fc04e3208/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171246Z&X-Amz-Expires=3600&X-Amz-Signature=abb8423538a076ae5d3f1b0de9c5a58125e5bfaa86720818407ba9ede3395bb1&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "40",
      "path": "content/008-viii-clean-it-up/008-8-goodbye-virtual-private-gateways.md",
      "content": "+++\ntitle = \"8. Goodbye Virtual Private Gateways\"\nweight = 8\n+++\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/28c08793-79ca-49be-84be-b1eb187d404c/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171246Z&X-Amz-Expires=3600&X-Amz-Signature=0809ef6fd8d6eff795157284e3c07bce27266dded339a45d09419fcb41b0e354&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/32186cb5-6071-4c7b-9e1c-33f89f69207a/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171246Z&X-Amz-Expires=3600&X-Amz-Signature=1854b6030cf1b9eafa2de771ccc94c410526ea267a945a0fc27179df86734aab&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n"
  },
  {
      "id": "41",
      "path": "content/008-viii-clean-it-up/009-9-goodbye-customer-gateways.md",
      "content": "+++\ntitle = \"9. Goodbye Customer Gateways\"\nweight = 9\n+++\n\n\n![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d5da4832-3825-4b06-9f7d-86c687d890a2/fe6ae0bb-7412-4111-8fdb-b061543f5331/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240903%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240903T171246Z&X-Amz-Expires=3600&X-Amz-Signature=e96b1c680e575a5d4b8d5993e25266fab3e9807169203a5a2dfd7dfb347d7a56&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\nWe’re now as clean as a whistle. \n\n\n"
  }
]